function fig = plot_5dof_results_v2(sim_data)%%PLOT_5DOF_RESULTS_V2 Visualização profissionalif isempty(sim_data.States)    warning('Sem dados para plotar');    return;endfig = figure('Name', sprintf('%s - %s', sim_data.Metadata.controller, sim_data.Metadata.maneuver), ...    'Position', [50 50 1400 900], 'Color', 'w');tt = sim_data.States;time = seconds(tt.Time);%%%% Subplot 1: Roll anglesubplot(2,3,1);plot(time, rad2deg(tt.phi), 'LineWidth', 2.5);grid on;xlabel('Time (s)'); ylabel('Roll Angle φ (deg)');title(sprintf('%s - Roll Response', sim_data.Metadata.controller));%%%% Subplot 2: Yaw ratesubplot(2,3,2);plot(time, rad2deg(tt.r), 'LineWidth', 2.5);grid on;xlabel('Time (s)'); ylabel('Yaw Rate r (deg/s)');title('Yaw Dynamics');%%%% Subplot 3: Unsprung rollsubplot(2,3,3);plot(time, rad2deg(tt.phi_uf), 'DisplayName', 'Front'); hold on;plot(time, rad2deg(tt.phi_ur), 'DisplayName', 'Rear'); hold off;grid on; legend;xlabel('Time (s)'); ylabel('Unsprung Roll (deg)');%%%% Subplot 4: Sideslipsubplot(2,3,4);plot(time, rad2deg(tt.beta), 'LineWidth', 2.5);grid on;xlabel('Time (s)'); ylabel('Sideslip β (deg)');%%%% Subplot 5: Roll ratesubplot(2,3,5);plot(time, rad2deg(tt.p), 'LineWidth', 2.5);grid on;xlabel('Time (s)'); ylabel('Roll Rate p (deg/s)');%%%% Subplot 6: Metricssubplot(2,3,6); axis off;text(0.1, 0.9, {    sprintf('\\bf{Metrics}');    sprintf('Roll RMS: %.4f deg', sim_data.Metrics.rms_roll_deg);    sprintf('Roll Max: %.4f deg', sim_data.Metrics.max_roll_deg);    sprintf('Exec: %.2f s', sim_data.Metrics.execution_time_s);}, 'FontSize', 11, 'VerticalAlignment', 'top');%%%% Salvar figurafig_path = fullfile('results', '5dof', 'figures', ...    sprintf('%s_%s_%s.png', sim_data.Metadata.controller, ...            sim_data.Metadata.maneuver, datestr(now, 'yyyymmdd_HHMMSS')));exportgraphics(fig, fig_path, 'Resolution', 300);fprintf('   Figura salva: %s\\n', fig_path);end
